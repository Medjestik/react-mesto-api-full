{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeleteCardPopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","components/InfoTooltip.js","utils/api.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","Header","onLogout","userEmail","loggedIn","pathname","useLocation","history","useHistory","React","useState","windowWidth","setWindowWidth","showMenu","setShowMenu","useEffect","resizeWindow","evt","target","innerWidth","window","addEventListener","removeEventListener","mobileMenu","className","type","onClick","src","logo","alt","getAuthMenu","buttons","button","find","btn","from","push","to","text","getNavButton","CurrentUserContext","createContext","Card","card","onCardClick","onLikeClick","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","like","cardLikeButtonClassName","link","name","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","handleCardLike","handleCardDelete","UserData","avatar","about","map","key","Footer","ImagePopup","onClose","onShow","PopupWithForm","title","submitText","isOpen","onSubmit","errorForm","inputValues","children","action","noValidate","EditProfilePopup","onUpdateUser","isLoading","setName","description","setDescription","errorName","setErrorName","errorDescription","setErrorDescription","error","errorText","e","preventDefault","id","value","onChange","checkValidity","validationMessage","placeholder","minLength","maxLength","required","pattern","EditAvatarPopup","onUpdateAvatar","linkRef","useRef","current","ref","AddPlacePopup","setLink","errorLink","setErrorLink","DeleteCardPopup","onDeleteCard","currentCard","Login","onLogin","email","setEmail","password","setPassword","handleSubmit","Register","onRegister","ProtectedRoute","Component","component","props","InfoTooltip","icon","baseUrl","handleResponse","res","ok","json","Promise","reject","fetch","method","headers","body","JSON","stringify","then","token","Accept","Authorization","App","setLoggedIn","setUserEmail","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isDeleteCardPopupOpen","setIsDeleteCardPopupOpen","setIsLoading","isRendering","setIsRendering","setCurrentUser","setCurrentCard","selectedCard","setSelectedCard","setCards","infoTooltip","setInfoTooltip","tokenCheck","localStorage","api","removeItem","catch","err","console","closeAllPopups","all","userInfo","initialCards","finally","handleEscClose","closeByOverlay","classList","contains","document","Provider","path","exact","data","status","setItem","log","newCard","newCards","item","filter","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.20119052.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.94cbab21.svg\";","import React from 'react';\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\nimport logo from '../images/logo.svg';\r\n\r\nfunction Header({ onLogout, userEmail, loggedIn }) {\r\n\r\n    const { pathname } = useLocation();\r\n    const history = useHistory();\r\n    const [windowWidth, setWindowWidth] = React.useState(0);\r\n    const [showMenu, setShowMenu] = React.useState(false);\r\n  \r\n    React.useEffect(() => {\r\n      function resizeWindow (evt) {\r\n        setWindowWidth(evt.target.innerWidth);\r\n      }\r\n\r\n      window.addEventListener('resize', resizeWindow);\r\n\r\n      return () => {\r\n        window.removeEventListener('resize', resizeWindow);\r\n      }\r\n    }, []);\r\n  \r\n    React.useEffect(() => {\r\n        setWindowWidth(window.innerWidth);\r\n        if (windowWidth > 600) {\r\n            setShowMenu(false);\r\n        }\r\n    }, [windowWidth])\r\n\r\n    const navButtons = [\r\n        { from: '/sign-up', to: '/sign-in', text: 'Войти' },\r\n        { from: '/sign-in', to: '/sign-up', text: 'Регистрация' }\r\n    ]\r\n\r\n    function getNavButton (buttons, pathname) {\r\n        const button = buttons.find((btn) => btn.from === pathname)\r\n        if (!button) return null\r\n        return (\r\n            <div className=\"header__auth\">\r\n                <button className=\"header__auth-nav\" type=\"button\" onClick={() => history.push(button.to)}>{button.text}</button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    function getAuthMenu (windowWidth) {\r\n        if (windowWidth > 600) { \r\n            return (\r\n                <div className=\"header__auth\">\r\n                    <p className=\"header__auth-email\">{userEmail}</p>\r\n                    <button className=\"header__auth-nav header__auth-nav_type_logout\" type=\"button\" onClick={onLogout}>Выход</button>\r\n                </div>\r\n          )\r\n        } else {\r\n                return (\r\n                    <div className=\"header__auth\">\r\n                        {showMenu\r\n                        ? <button className=\"header__button header__button_menu_hide\" type=\"button\" onClick={() => setShowMenu(false)} />\r\n                        : <button className=\"header__button header__button_menu_show\" type=\"button\" onClick={() => setShowMenu(true)} />\r\n                        }\r\n                    </div>\r\n                ) \r\n        }\r\n    }\r\n\r\n    const mobileMenu = (\r\n        <>\r\n            <p className=\"header__auth-email header__auth-email_type_mobile\">{userEmail}</p>\r\n            <button className=\"header__auth-nav header__auth-nav_type_logout\" type=\"button\" onClick={onLogout}>Выход</button>\r\n        </>\r\n    )\r\n\r\n    return (\r\n        <>\r\n            {loggedIn && \r\n                    <div className={`header__menu-mobile header__menu-mobile_type_${showMenu ? 'show' : 'hide'}`}>{mobileMenu}</div>\r\n            }\r\n            <header className=\"header\">\r\n                <img className=\"header__logo\" src={logo} alt=\"Логотип\" />\r\n                {loggedIn\r\n                    ? getAuthMenu(windowWidth)\r\n                    : getNavButton(navButtons, pathname)\r\n                }       \r\n            </header>\r\n        </>\r\n    );\r\n  }\r\n\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React, { useContext } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Card({ card, onCardClick, onLikeClick, onCardDelete }) {\r\n\r\n    const currentUser = useContext(CurrentUserContext);\r\n    const isOwn = card.owner === currentUser._id;\r\n    const cardDeleteButtonClassName = (`place__delete-button ${isOwn ? '' : 'place__delete-button_disabled'}`);\r\n\r\n    const isLiked = card.likes.some((like) => like === currentUser._id);\r\n    const cardLikeButtonClassName = (`place__like-button ${isLiked ? 'place__like-button-active' : '' }`);\r\n\r\n    function handleClick() {\r\n        onCardClick(card.name, card.link);\r\n    }\r\n\r\n    function handleLikeClick() {\r\n        onLikeClick(card);\r\n    }\r\n\r\n    function handleDeleteClick() {\r\n        onCardDelete(card);\r\n    }\r\n        \r\n    return (\r\n        <li className=\"card place__card\">\r\n            <Link to={`/card/${card._id}`}><img className=\"place__img\" src={card.link} alt={card.name} onClick={handleClick}/></Link>\r\n            <button className={cardDeleteButtonClassName} onClick={handleDeleteClick} type=\"button\" />\r\n            <div className=\"place__info\">\r\n                <p className=\"place__caption\">{card.name}</p>\r\n                <div className=\"place__likes-container\">\r\n                    <button className={cardLikeButtonClassName} onClick={handleLikeClick} type=\"button\" />\r\n                    <p className=\"place__like-count\">{card.likes.length}</p>\r\n                </div>\r\n            </div>\r\n        </li>\r\n    );\r\n  }\r\n  \r\n  export default Card;","import React from 'react';\r\nimport Card from '../components/Card.js'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Main({ onEditAvatar, onEditProfile, onAddPlace, onCardClick, cards, handleCardLike, handleCardDelete }) {\r\n\r\n    const UserData = React.useContext(CurrentUserContext);\r\n\r\n    return (\r\n        <main className=\"main\">\r\n            <section className=\"profile\">\r\n                <div className=\"profile__avatar\">\r\n                    <img className=\"profile__avatar-img\" alt=\"Аватар\" src={UserData.avatar} />\r\n                    <button className=\"profile__avatar-overlay\" type=\"button\" onClick={onEditAvatar} />\r\n                </div>\r\n                <div className=\"profile__info\">\r\n                    <div className =\"profile__title-container\">\r\n                        <h1 className=\"profile__title\">{UserData.name}</h1>\r\n                        <button className=\"profile__edit-button\" type=\"button\" onClick={onEditProfile} />\r\n                    </div> \r\n                    <p className=\"profile__subtitle\">{UserData.about}</p>\r\n                </div>\r\n                <button className=\"profile__add-button\" type=\"button\" onClick={onAddPlace} />\r\n            </section>\r\n\r\n            <section className=\"places\">\r\n                <ul className=\"place__container\">\r\n                    {cards.map((card) => \r\n                        <Card \r\n                            key={card._id}\r\n                            card={card}\r\n                            onCardClick={onCardClick}\r\n                            onLikeClick={handleCardLike}\r\n                            onCardDelete={handleCardDelete}\r\n                        />\r\n                    )}\r\n                </ul>\r\n            </section>\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\n\r\nfunction Footer() {\r\n    return (\r\n        <footer className=\"footer\">\r\n            <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction ImagePopup({ card, onClose }) {\r\n\r\n    return (\r\n        <div className={`popup popup__photo ${card.onShow ? \"popup_opened\" : \"\"}`}>\r\n            <figure className=\"popup__photo-container container\">      \r\n                <Link to=\"/\" className=\"popup__close-button popup__photo_type_close-button\" onClick={onClose} type=\"button\"></Link>\r\n                <img className=\"popup__img\" src={card.link} alt={card.name} />\r\n                <figcaption className=\"popup__caption\">{card.name}</figcaption>\r\n            </figure>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\n\r\nfunction PopupWithForm({ title, name, submitText, isOpen, onClose, onSubmit, errorForm,  inputValues, children }) {\r\n\r\n    return (\r\n        <div className={`popup popup__${name} ${isOpen ? \"popup_opened\" : \"\"}`}>\r\n              <form className=\"popup__container container\" onSubmit={onSubmit} name={name} action=\"#\" noValidate>\r\n                  <button className=\"popup__close-button\" onClick={onClose} type=\"button\" />\r\n                  <h2 className=\"popup__title\">{title}</h2>\r\n                  {children}\r\n                  <button \r\n                  className={`popup__submit-button popup__${name}_type_submit-button ${!(inputValues && !errorForm) ? \"popup__submit-button_disabled\" : \"\"}`} \r\n                  type=\"submit\">\r\n                      {submitText}\r\n                  </button>\r\n              </form>\r\n          </div>\r\n    )\r\n}\r\n\r\nexport default PopupWithForm;","import React, { useContext } from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js'\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, isLoading }) {\r\n    const [name, setName] = React.useState('');\r\n    const [description, setDescription] = React.useState('');\r\n    const [errorName, setErrorName] = React.useState({});\r\n    const [errorDescription, setErrorDescription] = React.useState({});\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n    const errorForm = errorName.error || errorDescription.error;\r\n\r\n    function handleChangeName(e) {\r\n        setName(e.target.value);\r\n        if (e.target.checkValidity()) {\r\n            setErrorName({\r\n                errorText: '',\r\n                error: false\r\n            });\r\n        }\r\n        else {\r\n            setErrorName({\r\n                errorText: e.target.validationMessage,\r\n                error: true\r\n            });\r\n        }  \r\n    }\r\n\r\n    function handleChangeDescription(e) {\r\n        setDescription(e.target.value);\r\n        if (e.target.checkValidity()) {\r\n            setErrorDescription({\r\n                errorText: '',\r\n                error: false\r\n            });\r\n        }\r\n        else {\r\n            setErrorDescription({\r\n                errorText: e.target.validationMessage,\r\n                error: true\r\n            });\r\n        }  \r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onUpdateUser({\r\n            name: name,\r\n            about: description,\r\n        });\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n        setErrorName({\r\n            errorText: '',\r\n            error: false\r\n        });\r\n        setErrorDescription({\r\n            errorText: '',\r\n            error: false\r\n        });\r\n    }, [currentUser, isOpen]);\r\n\r\n    return (\r\n        <PopupWithForm\r\n            title=\"Редактировать профиль\"\r\n            name=\"profile\"\r\n            submitText={`${isLoading ? \"Сохранение...\" : \"Сохранить\"}`}\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            onSubmit={handleSubmit}\r\n            errorForm={errorForm}\r\n            inputValues={name && description}\r\n        >\r\n        <label className=\"popup__field\">\r\n            <input \r\n            className={`popup__input popup__input_type_name ${errorName.error ? \"popup__input_novalid\" : \"\"}`}\r\n            type=\"text\" \r\n            id=\"name\"\r\n            value={name || ''}\r\n            onChange={handleChangeName}\r\n            name=\"name\" \r\n            placeholder=\"Имя\" \r\n            minLength=\"2\" \r\n            maxLength=\"40\" \r\n            required \r\n            pattern=\"[A-Za-zА-Яа-яЁё -]{1,}\" \r\n            />\r\n            <span className={`popup__input-error ${errorName.error ? \"popup__input-error_active\" : \"\"}`} id=\"name-error\">\r\n                {errorName.errorText}\r\n            </span>\r\n        </label>\r\n        <label className=\"popup__field\">\r\n            <input \r\n            className={`popup__input popup__input_type_job ${errorDescription.error ? \"popup__input_novalid\" : \"\"}`}\r\n            type=\"text\" \r\n            id=\"job\"\r\n            value={description || ''}\r\n            onChange={handleChangeDescription}\r\n            name=\"job\" \r\n            placeholder=\"Занятие\" \r\n            minLength=\"2\" \r\n            maxLength=\"200\" \r\n            required \r\n            />\r\n            <span className={`popup__input-error ${errorDescription.error ? \"popup__input-error_active\" : \"\"}`} id=\"job-error\">\r\n                {errorDescription.errorText}\r\n            </span>\r\n        </label>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, isLoading }) {\r\n    const linkRef = React.useRef();\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n      \r\n        onUpdateAvatar({\r\n          avatar: linkRef.current.value,\r\n        });\r\n        linkRef.current.value = '';\r\n    }\r\n    \r\n    return (\r\n        <PopupWithForm\r\n            title=\"Обновить аватар\"\r\n            name=\"change-avatar\"\r\n            submitText={`${isLoading ? \"Сохранение...\" : \"Сохранить\"}`}\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            onSubmit={handleSubmit}\r\n            inputValues={true}\r\n            >\r\n            <label className=\"popup__field\">\r\n                <input \r\n                className=\"popup__input popup__input_type_avatar\" \r\n                type=\"url\"\r\n                id=\"avatar\"\r\n                ref={linkRef}\r\n                name=\"avatar\" \r\n                placeholder=\"Ссылка на картинку\" \r\n                required \r\n                />\r\n                <span className=\"popup__input-error\" id=\"link-error\" />\r\n            </label>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, isLoading }) {\r\n    const [name, setName] = React.useState('');\r\n    const [link, setLink] = React.useState('');\r\n    const [errorName, setErrorName] = React.useState({});\r\n    const [errorLink, setErrorLink] = React.useState({});\r\n\r\n    const errorForm = errorName.error || errorLink.error;\r\n\r\n    function handleChangeName(e) {\r\n        setName(e.target.value);\r\n        if (e.target.checkValidity()) {\r\n            setErrorName({\r\n                errorText: '',\r\n                error: false\r\n            });\r\n        }\r\n        else {\r\n            setErrorName({\r\n                errorText: e.target.validationMessage,\r\n                error: true\r\n            });\r\n        }  \r\n    }\r\n\r\n    function handleChangeLink(e) {\r\n        setLink(e.target.value);\r\n        if (e.target.checkValidity()) {\r\n            setErrorLink({\r\n                errorText: '',\r\n                error: false\r\n            });\r\n        }\r\n        else {\r\n            setErrorLink({\r\n                errorText: e.target.validationMessage,\r\n                error: true\r\n            });\r\n        }\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onAddPlace({\r\n            name: name,\r\n            link: link,\r\n        });\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setName('');\r\n        setLink('');\r\n        setErrorName({\r\n            errorText: '',\r\n            error: false\r\n        });\r\n        setErrorLink({\r\n            errorText: '',\r\n            error: false\r\n        });\r\n    }, [isOpen]);\r\n\r\n    \r\n\r\n    return (\r\n        <PopupWithForm\r\n            title=\"Новое место\"\r\n            name=\"cards\"\r\n            submitText={`${isLoading ? \"Сохранение...\" : \"Сохранить\"}`}\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            onSubmit={handleSubmit}\r\n            errorForm={errorForm}\r\n            inputValues={name && link}\r\n            >\r\n            <label className=\"popup__field\">\r\n                <input\r\n                className={`popup__input popup__input_type_title ${errorName.error ? \"popup__input_novalid\" : \"\"}`}\r\n                type=\"text\"\r\n                id=\"title\"\r\n                name=\"name\"\r\n                value={name || ''}\r\n                onChange={handleChangeName}\r\n                placeholder=\"Название\"\r\n                minLength=\"1\"\r\n                maxLength=\"30\"\r\n                required\r\n                />\r\n                <span className={`popup__input-error ${errorName.error ? \"popup__input-error_active\" : \"\"}`} id=\"title-error\">\r\n                    {errorName.errorText}\r\n                </span>\r\n            </label>\r\n            <label className=\"popup__field\">\r\n                <input \r\n                className={`popup__input popup__input_type_link ${errorLink.error ? \"popup__input_novalid\" : \"\"}`}\r\n                type=\"url\" id=\"link\" \r\n                name=\"link\"\r\n                value={link || ''}\r\n                onChange={handleChangeLink}\r\n                placeholder=\"Ссылка на картинку\" \r\n                required />\r\n                <span className={`popup__input-error ${errorLink.error ? \"popup__input-error_active\" : \"\"}`} id=\"link-error\">\r\n                    {errorLink.errorText}\r\n                </span>\r\n            </label>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction DeleteCardPopup({ isOpen, onClose, onDeleteCard, currentCard, isLoading }) {\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onDeleteCard(currentCard);\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm\r\n        title=\"Вы уверены?\"\r\n        name=\"delete-card\"\r\n        submitText={`${isLoading ? \"Удаление...\" : \"Да\"}`}\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        onSubmit={handleSubmit}\r\n        errorForm={false}\r\n        inputValues={true}\r\n        >\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default DeleteCardPopup;","import React from 'react';\r\n\r\nfunction Login ({ onLogin }) {\r\n\r\n    const [email, setEmail] = React.useState('');\r\n    const [password, setPassword] = React.useState('');\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onLogin({ email, password });\r\n    }\r\n\r\n    return (\r\n        <div className=\"auth\">\r\n            <h1 className=\"auth__title\">Вход</h1>\r\n            <form className=\"auth__form\" action=\"#\" noValidate name=\"login\" onSubmit={handleSubmit}>\r\n            <input \r\n                className=\"auth__input\"\r\n                type=\"email\" \r\n                id=\"login-Email\"\r\n                value={email}\r\n                onChange={(evt) => setEmail(evt.target.value)}\r\n                name=\"loginEmail\" \r\n                placeholder=\"Email\" \r\n                minLength=\"2\" \r\n                maxLength=\"50\" \r\n                required \r\n            />\r\n            <input \r\n                className=\"auth__input\"\r\n                id=\"login-password\"\r\n                name=\"loginPassword\"\r\n                placeholder=\"Пароль\"\r\n                value={password}\r\n                onChange={(evt) => setPassword(evt.target.value)}\r\n                minLength=\"2\" \r\n                maxLength=\"50\" \r\n                required \r\n            />\r\n            <button className=\"auth__submit\" type=\"submit\" onSubmit={handleSubmit}>Войти</button>\r\n            </form>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default Login;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Register ({ onRegister }) {\r\n\r\n    const [email, setEmail] = React.useState('');\r\n    const [password, setPassword] = React.useState('');\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onRegister({ email, password });\r\n    }\r\n\r\n    return (\r\n        <div className=\"auth\">\r\n            <h1 className=\"auth__title\">Регистрация</h1>\r\n            <form className=\"auth__form\" action=\"#\" noValidate name=\"login\" onSubmit={handleSubmit}>\r\n            <input \r\n                className=\"auth__input\"\r\n                type=\"email\" \r\n                id=\"regEmail\"\r\n                value={email}\r\n                onChange={(evt) => setEmail(evt.target.value)}\r\n                name=\"regEmail\" \r\n                placeholder=\"Email\" \r\n                minLength=\"2\" \r\n                maxLength=\"50\" \r\n                required \r\n            />\r\n            <input \r\n                className=\"auth__input\"\r\n                type=\"password\" \r\n                id=\"regPass\"\r\n                value={password}\r\n                onChange={(evt) => setPassword(evt.target.value)}\r\n                name=\"regPass\"\r\n                placeholder=\"Пароль\" \r\n                minLength=\"2\" \r\n                maxLength=\"50\" \r\n                required \r\n            />\r\n            <button className=\"auth__submit\" type=\"submit\" onSubmit={handleSubmit}>Зарегистрироваться</button>\r\n            <p className=\"auth__question\">Уже зарегистрированы?<Link className=\"auth__link\" to=\"sign-in\">Войти</Link></p>\r\n            </form>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default Register;","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn === true ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\r\n      }\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute;","import React from 'react';\r\n\r\nfunction InfoTooltip({ text, icon, isOpen, onClose }) {\r\n    return (\r\n        <div className={`tooltip  ${isOpen ? \"tooltip_opened\" : \"\"}`}>\r\n            <div className=\"tooltip__container\">\r\n                <button className=\"tooltip__close-button\" onClick={onClose} type=\"button\" />\r\n                <div className={`tooltip__icon tooltip__icon_type_${icon}`}></div>\r\n                <p className=\"tooltip__text\">{text}</p>\r\n            </div>\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default InfoTooltip;","const baseUrl = 'https://api.medjestik.mesto.students.nomoreparties.space';\r\n\r\nfunction handleResponse (res) {\r\n    if (res.ok) {\r\n      return res.json()\r\n    } else {\r\n      return Promise.reject(res)\r\n    }\r\n}\r\n\r\nconst register = ({ email, password }) => {\r\n    return fetch(`${baseUrl}/signup`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email, password })\r\n    })\r\n    .then(res => handleResponse(res));\r\n};\r\n\r\nconst login = ({ email, password  }) => {\r\n    return fetch(`${baseUrl}/signin`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email, password })\r\n    })\r\n    .then(res => handleResponse(res));\r\n};\r\n\r\nconst getUser = ({ token }) => {\r\n    return fetch(`${baseUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    })\r\n      .then(res => handleResponse(res));\r\n}\r\n\r\nconst getInitialCards = ({ token }) => {\r\n    return fetch(`${baseUrl}/cards`, {\r\n        method: 'GET',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n    .then(res => handleResponse(res));\r\n}\r\n\r\nconst editUserInfo = ({ token, name, about }) => {\r\n    return fetch(`${baseUrl}/users/me`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n            name: name,\r\n            about: about\r\n        })\r\n    })\r\n    .then(res => handleResponse(res));\r\n}\r\n\r\nconst changeAvatar = ({ token, avatar }) => {\r\n    return fetch(`${baseUrl}/users/me/avatar`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ avatar })\r\n    })\r\n    .then(res => handleResponse(res));\r\n}\r\n\r\nconst addCard = ({ token, name, link }) => {\r\n    return fetch(`${baseUrl}/cards`, {\r\n        method: 'POST',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n            name: name,\r\n            link: link\r\n            })\r\n    })\r\n    .then(res => handleResponse(res));\r\n}\r\n\r\nconst deleteCard = ({ token, id }) => {\r\n    return fetch(`${baseUrl}/cards/${id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n    .then(res => handleResponse(res));\r\n}\r\n\r\nconst putLike = ({ token, id }) => {\r\n    return fetch(`${baseUrl}/cards/${id}/likes`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n    .then(res => handleResponse(res));\r\n}\r\n\r\nconst removeLike = ({ token, id }) => {\r\n    return fetch(`${baseUrl}/cards/${id}/likes`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n    .then(res => handleResponse(res));\r\n}\r\n\r\nexport default {\r\n    register,\r\n    login,\r\n    getUser,\r\n    getInitialCards,\r\n    editUserInfo,\r\n    changeAvatar,\r\n    addCard,\r\n    deleteCard,\r\n    putLike,\r\n    removeLike\r\n}\r\n","import React from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport Header from '../components/Header.js';\nimport Main from '../components/Main.js';\nimport Footer from '../components/Footer.js';\nimport ImagePopup from '../components/ImagePopup.js';\nimport EditProfilePopup from '../components/EditProfilePopup.js';\nimport EditAvatarPopup from '../components/EditAvatarPopup.js';\nimport AddPlacePopup from '../components/AddPlacePopup.js';\nimport DeleteCardPopup from '../components/DeleteCardPopup.js';\nimport Login from '../components/Login.js';\nimport Register from '../components/Register.js';\nimport ProtectedRoute from '../components/ProtectedRoute.js';\nimport InfoTooltip from '../components/InfoTooltip.js';\nimport api from '../utils/api.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nfunction App() {\n\n    const [loggedIn, setLoggedIn] = React.useState(false);\n    const [userEmail, setUserEmail] = React.useState('');\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n    const [isDeleteCardPopupOpen, setIsDeleteCardPopupOpen] = React.useState(false);\n    const [isLoading, setIsLoading] = React.useState(false);\n    const [isRendering, setIsRendering] = React.useState(true);\n    const [currentUser, setCurrentUser] = React.useState({});\n    const [currentCard, setCurrentCard] = React.useState({});\n    const [selectedCard, setSelectedCard] = React.useState({});\n    const [cards, setCards] = React.useState([]);\n    const [infoTooltip, setInfoTooltip] = React.useState({ text: '', icon: '', isOpen: false });\n\n    const history = useHistory();\n\n    React.useEffect(() => {\n        tokenCheck();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    React.useEffect(() => {\n        if (loggedIn) {\n            Promise.all([api.getUser({ token: localStorage.token }), api.getInitialCards({ token: localStorage.token })])\n            .then(([ userInfo, initialCards]) => {\n                setCurrentUser(userInfo);\n                setCards(initialCards);\n            })\n            .catch((err) => {\n                console.error(err);\n            })\n            .finally(() => setIsRendering(false));\n        }\n    }, [loggedIn]);\n\n    React.useEffect(() => {\n        if (loggedIn) {\n            \n            function handleEscClose(e) {\n                if (e.key === \"Escape\") {\n                  closeAllPopups();\n                  history.push('/');\n                }\n            }\n          \n            function closeByOverlay(e) {\n                if (e.target.classList.contains('popup_opened')) {\n                  closeAllPopups();\n                  history.push('/');\n                }\n            }\n\n            document.addEventListener('keyup', handleEscClose);\n            document.addEventListener('click', closeByOverlay);\n      \n            return () => {\n            document.removeEventListener('keyup', handleEscClose);\n            document.removeEventListener('click', closeByOverlay);\n            }\n        }\n    })\n\n    function handleRegister ({ email, password }) {\n        api.register({ email, password })\n          .then((res) => {\n            if (res.data) {\n                setInfoTooltip({ text: 'Вы успешно зарегистрировались!', icon: 'success', isOpen: true });\n                history.push('/sign-in');\n            } \n          })\n          .catch((err) => {\n            if (err.status === 400) {\n                setInfoTooltip({ text: 'Некорректно заполнено одно из полей!', icon: 'error', isOpen: true }); \n            } else {\n                setInfoTooltip({ text: 'Что-то пошло не так! Попробуйте еще раз.', icon: 'error', isOpen: true });\n            }\n          });\n    }\n\n    function handleLogin ({ email, password }) {\n        api.login({ email, password })\n          .then((data) => {\n            if (data.token) {\n                localStorage.setItem('token', data.token);\n                setLoggedIn(true);\n                tokenCheck();\n            }\n          })\n          .catch((err) => {\n              console.log(err);\n            if (err.status === 400) {\n                setInfoTooltip({ text: 'Некорректно заполнено одно из полей!', icon: 'error', isOpen: true }); \n            } else if (err.status === 401) {\n                setInfoTooltip({ text: 'Неверный логин или пароль', icon: 'error', isOpen: true }); \n            } else {\n                setInfoTooltip({ text: 'Что-то пошло не так! Попробуйте еще раз.', icon: 'error', isOpen: true });\n            }\n          });\n    }\n\n    function tokenCheck () {\n        if (localStorage.token) {\n          api.getUser({ token: localStorage.token })\n            .then((res) => {\n              if (res) {\n                setLoggedIn(true);\n                setUserEmail(res.email);\n                history.push('/');\n              } else {\n                localStorage.removeItem('token');\n                setLoggedIn(false);\n                setUserEmail('');\n              }\n            })\n            .catch((err) => {\n                console.error(err);\n            });\n        }\n    }\n\n    function handleLogout () {\n        localStorage.removeItem('token');\n        setLoggedIn(false);\n        setUserEmail('');\n        history.push('sign-in');\n    }\n\n    function handleCardClick(name, link) {\n        setSelectedCard({\n            onShow: true, \n            name: name, \n            link: link\n        });\n    }\n\n    function handleEditAvatarClick() {\n        setIsEditAvatarPopupOpen(true);\n    }\n\n    function handleEditProfileClick() {\n        setIsEditProfilePopupOpen(true);\n    }\n\n    function handleAddPlaceClick() {\n        setIsAddPlacePopupOpen(true);\n    }\n\n    function handleDeleteCardClick(card) {\n        setIsDeleteCardPopupOpen(true);\n        setCurrentCard(card);\n    }\n\n    function closeAllPopups() {\n        setIsEditAvatarPopupOpen(false);\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n        setIsDeleteCardPopupOpen(false);\n        setSelectedCard((selectedCard)=> {\n            return {...selectedCard, onShow: false}\n        });\n        setInfoTooltip({ ...infoTooltip, isOpen: false });\n    }\n\n    function handleCardLike(card) { \n        const isLiked = card.likes.some((like) => like === currentUser._id);\n        \n        if (!isLiked) {\n            api.putLike({ token: localStorage.token, id: card._id })\n            .then((newCard) => {\n                const newCards = cards.map((item) => item._id === card._id ? newCard : item);\n                setCards(newCards);\n            })\n            .catch((error) => {\n                console.error(error)\n            })\n        } else {\n            api.removeLike({ token: localStorage.token, id: card._id })\n            .then((newCard) => {\n                const newCards = cards.map((item) => item._id === card._id ? newCard : item);\n                setCards(newCards);\n            })\n            .catch((error) => {\n                console.error(error)\n            })\n        }\n    }\n\n    function handleCardDelete(card) {\n        setIsLoading(true);\n        api.deleteCard({ token: localStorage.token, id: card._id })\n        .then(() => {\n            const newCards = cards.filter(item => item._id !== card._id);\n            setCards(newCards);\n            closeAllPopups();\n        })\n        .catch((error) => {\n            console.error(error)\n        })\n        .finally(() => {\n            setIsLoading(false);\n        })\n    }\n\n    function handleUpdateUser({name, about}) {\n        setIsLoading(true);\n        api.editUserInfo({ token: localStorage.token, name, about })\n        .then((data) => {\n            setCurrentUser(data);\n            closeAllPopups();\n        })\n        .catch((error) => {\n            console.error(error)\n        })\n        .finally(() => {\n            setIsLoading(false);\n        })\n    }\n\n    function handleUpdateAvatar({ avatar }) {\n        setIsLoading(true);\n        api.changeAvatar({ token: localStorage.token, avatar })\n        .then((data) => {\n            setCurrentUser({...currentUser, avatar});\n            closeAllPopups();\n        })\n        .catch((error) => {\n            console.error(error);\n        })\n        .finally(() => {\n            setIsLoading(false);\n        })\n    }\n\n    function handleAddPlaceSubmit({name, link}) {\n        setIsLoading(true);\n        api.addCard({ token: localStorage.token, name, link })\n        .then((data) => {\n            setCards([data, ...cards]);\n            closeAllPopups();\n        })\n        .catch((error) => {\n            console.error(error)\n        })\n        .finally(() => {\n            setIsLoading(false);\n        })\n    }\n    \n    return (\n        isRendering && loggedIn \n        ? <div className=\"page__rendering\"><p className=\"page__rendering_type_loading\">Загрузка..</p></div>\n        :<CurrentUserContext.Provider value={currentUser}>\n            <div className=\"page\">\n                <Header \n                    onLogout={handleLogout}\n                    userEmail={userEmail} \n                    loggedIn={loggedIn}\n                />\n\n                <Switch>\n                    <Route path=\"/sign-up\" exact>\n                        <Register onRegister={handleRegister} />\n                    </Route>\n                    <Route path=\"/sign-in\" exact>\n                        <Login onLogin={handleLogin} />\n                    </Route>\n\n                    <ProtectedRoute \n                        component={Main}\n                        path=\"/\"\n                        loggedIn={loggedIn}\n                        onEditAvatar={handleEditAvatarClick} \n                        onEditProfile={handleEditProfileClick}\n                        onAddPlace={handleAddPlaceClick}\n                        onCardClick={handleCardClick}\n                        cards={cards}\n                        handleCardLike={handleCardLike}\n                        handleCardDelete={handleDeleteCardClick}\n                    />\n\n                </Switch>\n\n                <Footer />\n\n                <ImagePopup\n                    card={selectedCard}\n                    onClose={closeAllPopups}\n                />\n\n                <EditProfilePopup \n                isOpen={isEditProfilePopupOpen}\n                onClose={closeAllPopups}\n                onUpdateUser={handleUpdateUser}\n                isLoading={isLoading}\n                />\n\n                <EditAvatarPopup \n                isOpen={isEditAvatarPopupOpen}\n                onClose={closeAllPopups}\n                onUpdateAvatar={handleUpdateAvatar}\n                isLoading={isLoading}\n                />\n\n                <AddPlacePopup\n                isOpen={isAddPlacePopupOpen}\n                onClose={closeAllPopups}\n                onAddPlace={handleAddPlaceSubmit}\n                isLoading={isLoading}\n                />\n\n                <DeleteCardPopup\n                isOpen={isDeleteCardPopupOpen}\n                onClose={closeAllPopups}\n                onDeleteCard={handleCardDelete}\n                currentCard={currentCard}\n                isLoading={isLoading}\n                />\n\n                <InfoTooltip\n                text={infoTooltip.text}\n                icon={infoTooltip.icon}\n                isOpen={infoTooltip.isOpen}\n                onClose={closeAllPopups}\n                />\n                \n            </div>\n        </CurrentUserContext.Provider>\n    )\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport { BrowserRouter } from 'react-router-dom';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter> \n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}